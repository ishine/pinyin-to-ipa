# pinyin-to-ipa

[![PyPI](https://img.shields.io/pypi/v/pinyin-to-ipa.svg)](https://pypi.python.org/pypi/pinyin-to-ipa)
[![PyPI](https://img.shields.io/pypi/pyversions/pinyin-to-ipa.svg)](https://pypi.python.org/pypi/pinyin-to-ipa)
[![MIT](https://img.shields.io/github/license/stefantaubert/pinyin-to-ipa.svg)](https://github.com/stefantaubert/pinyin-to-ipa/blob/master/LICENSE)
[![PyPI](https://img.shields.io/pypi/wheel/pinyin-to-ipa.svg)](https://pypi.python.org/pypi/pinyin-to-ipa)
[![PyPI](https://img.shields.io/pypi/implementation/pinyin-to-ipa.svg)](https://pypi.python.org/pypi/pinyin-to-ipa)

Command-line interface (CLI) to create a pronunciation dictionary by looking up IPA transcriptions using [dragonmapper](https://github.com/tsroten/dragonmapper) including the possibility of ignoring punctuation and splitting words on hyphens before transcribing them.
Instead of attaching the tones to the syllable the tones are attached to the vowel of the syllable.

## Installation

```sh
pip install pinyin-to-ipa --user
```

## Usage

```sh
pinyin-to-ipa-cli
```

### Example

```sh
# Create example vocabulary
cat > /tmp/vocabulary.txt << EOF
社会语言学？
㐻，
『㑐
鲜-亮。
『占斌？
『机具-机呀？
EOF

# Create dictionary from vocabulary
pinyin-to-ipa-cli \
  /tmp/vocabulary.txt \
  /tmp/result.dict \
  --split-on-hyphen \
  --n-jobs 4

cat /tmp/result.dict
```

Output:

```txt
社会语言学？  ʂ ɤ˥˩ x w eɪ˥˩ y˧˩˧ j ɛ˧˥ n ɕ ɥ œ˧˥ ？
㐻，  n eɪ˥˩ ，
『㑐  『 ʂ u˥
鲜-亮。  ɕ j ɛ˥ n - l j ɑ˥˩ ŋ 。
『占斌？  『 ʈʂ a˥˩ n p i˥ n ？
『机具-机呀？  『 tɕ i˥ tɕ y˥˩ - tɕ i˥ j a ？
```

## Phoneme Set

```txt
a
aɪ
eɪ
f
i
j
k
kʰ
l
m
n
oʊ
p
pʰ
s
t
ts
tsʰ
tɕ
tɕʰ
tʰ
u
w
x
y
ŋ
œ
ɑ
ɑʊ
ɔ
ɕ
ə
ɛ
ɤ
ɥ
ɨ
ɯ
ɻ
ʂ
ʈʂ
ʈʂʰ
ʊ
ʐ
```

Vowels and diphthongs contain one of these tones:

```txt
˥ (first tone)
˧˥ (second tone)
˧˩˧ (third tone)
˥˩ (fourth tone)
(none)
```

## Dependencies

- `pronunciation-dictionary >= 0.0.4`
- `ordered-set >= 4.1.0`
- `word-to-pronunciation >= 0.0.1`
- `dragonmapper >=0.2.6, < 0.3`
- `tqdm`

## License

MIT License

## Acknowledgments

[dragonmapper](https://github.com/tsroten/dragonmapper)

Funded by the Deutsche Forschungsgemeinschaft (DFG, German Research Foundation) – Project-ID 416228727 – CRC 1410

## Citation

If you want to cite this repo, you can use this BibTeX-entry generated by GitHub (see *About => Cite this repository*).
